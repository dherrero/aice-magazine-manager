{
  "version": 3,
  "sources": ["../../../../../../apps/app-back/src/main.ts"],
  "sourcesContent": ["import cors from 'cors';\nimport express from 'express';\nimport multer from 'multer';\n\nimport { UPLOAD_DIR } from './globals';\nimport api from './routes';\n\nclass Main {\n  #app: express.Application;\n  #upload: multer.Multer;\n  #port: number;\n\n  constructor(port: number) {\n    this.#app = express();\n    this.#upload = multer();\n    this.#port = port;\n  }\n\n  start() {\n    this.#config();\n    this.#setRoutes();\n\n    this.#app.listen(this.#port, () => {\n      console.log(`Server is running on port ${this.#port}`);\n    });\n  }\n\n  #config() {\n    this.#app.use(cors());\n    this.#app.use(express.json());\n\n    // static files, pdf and front page images\n    this.#app.use(\n      process.env.NODE_UPLOAD_FILES\n        ? `/${process.env.NODE_UPLOAD_FILES}`\n        : '/uploads',\n      express.static(UPLOAD_DIR)\n    );\n\n    // expose authorization headers\n    this.#app.use((_, res, next) => {\n      res.setHeader(\n        'Access-Control-Expose-Headers',\n        'Authorization, Refresh-Token'\n      );\n      next();\n    });\n  }\n  #setRoutes() {\n    try {\n      this.#app.use('/api', api);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n}\nconst PORT = process.env.NODE_PORT\n  ? Number(process.env.NODE_PORT)\n  : Number('3333');\nconst main = new Main(PORT);\nmain.start();\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;AAAA,kBAAiB;AACjB,qBAAoB;AACpB,oBAAmB;AAEnB,qBAA2B;AAC3B,oBAAgB;AAEhB,MAAM,KAAK;AAAA,EACT;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,MAAc;AACxB,SAAK,WAAO,eAAAA,SAAQ;AACpB,SAAK,cAAU,cAAAC,SAAO;AACtB,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,QAAQ;AACN,SAAK,QAAQ;AACb,SAAK,WAAW;AAEhB,SAAK,KAAK,OAAO,KAAK,OAAO,MAAM;AACjC,cAAQ,IAAI,6BAA6B,KAAK,KAAK,EAAE;AAAA,IACvD,CAAC;AAAA,EACH;AAAA,EAEA,UAAU;AACR,SAAK,KAAK,QAAI,YAAAC,SAAK,CAAC;AACpB,SAAK,KAAK,IAAI,eAAAF,QAAQ,KAAK,CAAC;AAG5B,SAAK,KAAK;AAAA,MACR,QAAQ,IAAI,oBACR,IAAI,QAAQ,IAAI,iBAAiB,KACjC;AAAA,MACJ,eAAAA,QAAQ,OAAO,yBAAU;AAAA,IAC3B;AAGA,SAAK,KAAK,IAAI,CAAC,GAAG,KAAK,SAAS;AAC9B,UAAI;AAAA,QACF;AAAA,QACA;AAAA,MACF;AACA,WAAK;AAAA,IACP,CAAC;AAAA,EACH;AAAA,EACA,aAAa;AACX,QAAI;AACF,WAAK,KAAK,IAAI,QAAQ,cAAAG,OAAG;AAAA,IAC3B,SAAS,OAAO;AACd,cAAQ,MAAM,KAAK;AAAA,IACrB;AAAA,EACF;AACF;AACA,MAAM,OAAO,QAAQ,IAAI,YACrB,OAAO,QAAQ,IAAI,SAAS,IAC5B,OAAO,MAAM;AACjB,MAAM,OAAO,IAAI,KAAK,IAAI;AAC1B,KAAK,MAAM;",
  "names": ["express", "multer", "cors", "api"]
}
