"use strict";(self.webpackChunkapp_front=self.webpackChunkapp_front||[]).push([[578],{5578:(V,_,a)=>{a.r(_),a.d(_,{default:()=>L});var g=a(177),e=a(4438),M=a(483),E=a(749),A=a(7951),c=a(4221),y=a(7183);function R(t,r){if(1&t&&e.nrm(0,"img",1),2&t){const n=e.XpG();e.FS9("alt",n.title),e.Y8G("src",n.imageUrl,e.B4B)}}let F=(()=>{class t{#e=A._.api;ngOnInit(){const n=new URL(this.pdfPath,this.#e);if(this.pdfURL=`${n.href}#page=${this.page}`,this.frontPage){const o=new URL(this.frontPage,this.#e);this.imageUrl=o.href}}static#t=this.\u0275fac=function(o){return new(o||t)};static#n=this.\u0275cmp=e.VBU({type:t,selectors:[["app-card"]],inputs:{title:"title",content:"content",pdfPath:"pdfPath",page:"page",frontPage:"frontPage"},standalone:!0,features:[e.aNF],decls:9,vars:4,consts:[[1,"card","w-100","h-100"],["appImageOnError","",1,"card-img-top",3,"src","alt"],[1,"card-body","d-flex","flex-column"],[1,"card-title"],[1,"card-text",3,"innerHTML"],[1,"card-footer"],["target","_blank","ngbTooltip","Ver PDF",1,"card-link",3,"href"],[1,"lni","lni-eye"]],template:function(o,i){1&o&&(e.j41(0,"div",0),e.DNE(1,R,1,2,"img",1),e.j41(2,"div",2)(3,"h5",3),e.EFF(4),e.k0s(),e.nrm(5,"div",4),e.j41(6,"div",5)(7,"a",6),e.nrm(8,"i",7),e.k0s()()()()),2&o&&(e.R7$(),e.vxM(1,i.imageUrl?1:-1),e.R7$(3),e.JRh(i.title),e.R7$(),e.Y8G("innerHTML",i.content,e.npT),e.R7$(2),e.Y8G("href",i.pdfURL,e.B4B))},dependencies:[g.MD,c.n8,c.md,y.q,y.m],styles:["[_nghost-%COMP%]{border:white}[_nghost-%COMP%]   .card-body[_ngcontent-%COMP%]{justify-content:space-between;padding:0 5px}[_nghost-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{overflow:hidden;text-align:center;border-bottom:1px solid grey;padding:5px 0 8px;align-content:start;margin:0}[_nghost-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{max-height:260px;min-height:260px;padding:10px 5px;overflow:hidden auto}[_nghost-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{max-height:50px;min-height:50px;text-align:right;background-color:#fff;align-content:end}[_nghost-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:#556b2f}"]})}return t})();var S=a(1635),s=a(9417),O=function(t){return t[t.GREATERTHAN=1]="GREATERTHAN",t[t.GREATERTHANEQUAL=2]="GREATERTHANEQUAL",t[t.LESSTHAN=3]="LESSTHAN",t[t.LESSTHANEQUAL=4]="LESSTHANEQUAL",t[t.EQUAL=5]="EQUAL",t}(O||{}),P=a(9894),j=a(5964);function k(t,r){if(1&t&&(e.j41(0,"option",18),e.EFF(1),e.k0s()),2&t){const n=r.$implicit,o=r.$index,i=e.XpG(2);e.Y8G("value",n),e.R7$(),e.SpI(" ",i.typeDescription[o]," ")}}function T(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",14)(1,"label",15),e.EFF(2,"Filtrar entre las revistas cuyo n\xfamero sean"),e.k0s(),e.j41(3,"div",16)(4,"select",17),e.Z7z(5,k,2,2,"option",18,e.Vm6),e.k0s()(),e.j41(7,"div",19),e.nrm(8,"input",20),e.k0s(),e.j41(9,"div",21)(10,"button",22),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.searchByFilters())}),e.EFF(11," Filtrar "),e.k0s()()()}if(2&t){const n=e.XpG();e.R7$(5),e.Dyx(n.typeOptions)}}let C=class b{constructor(){this.searchValue=(0,e.CGW)(),this.#e=(0,e.WQX)(s.ok),this.search=this.#e.group({query:[""],type:[""],number:[""]}),this.filtersOpen=!1,this.typeOptions=Object.values(O).filter(r=>"number"==typeof r),this.typeDescription=["Mayor que","Mayor o igual que","Menor que","Menor o igual que","Igual a"]}#e;ngOnInit(){this.search.valueChanges.pipe((0,P.s)(this),(0,j.p)(()=>!this.filtersOpen)).subscribe(r=>{this.searchValue.emit(r.query&&r.query.length>3?r:{})})}cleanQuery(){this.search.patchValue({query:"",type:"",number:""})}searchByFilters(){this.searchValue.emit(this.search.value)}static#t=this.\u0275fac=function(n){return new(n||b)};static#n=this.\u0275cmp=e.VBU({type:b,selectors:[["app-search"]],outputs:{searchValue:"searchValue"},standalone:!0,features:[e.aNF],decls:17,vars:3,consts:[[1,"row","p-sm-0","pe-5",3,"formGroup"],[1,"col-12","p-0"],[1,"input-group","w-100"],["type","text","placeholder","Escribe aqu\xed para empezar a buscar...","formControlName","query","aria-label","Escribe aqu\xed para empezar a buscar...",1,"form-control","form-control-lg"],[1,"input-group-text","button-clean",3,"click"],["ngbTooltip","Reiniciar b\xfasqueda","placement","left","aria-label","Reiniciar busqueda",1,"lni","lni-close"],[1,"col-12","search-filters","p-0"],["ngbAccordion","",3,"hidden","show"],["ngbAccordionItem",""],["ngbAccordionHeader","","aria-label","ver filtros",1,"text-end"],["ngbAccordionButton",""],[1,"filter-alert"],["ngbAccordionCollapse",""],["ngbAccordionBody",""],[1,"row"],["for","inputRevista",1,"col-sm-6","col-form-label"],[1,"col-sm-3"],["aria-label","Default select example","formControlName","type",1,"form-select"],[3,"value"],[1,"col-2"],["type","number","id","inputRevista","placeholder","N\xfamero de revista","formControlName","number",1,"form-control"],[1,"col-1"],[1,"btn","btn-primary",3,"click"]],template:function(n,o){1&n&&(e.j41(0,"form",0)(1,"div",1)(2,"div",2),e.nrm(3,"input",3),e.j41(4,"span",4),e.bIt("click",function(){return o.cleanQuery()}),e.nrm(5,"i",5),e.k0s()()(),e.j41(6,"div",6)(7,"div",7),e.bIt("hidden",function(){return o.filtersOpen=!1})("show",function(){return o.filtersOpen=!0}),e.j41(8,"div",8)(9,"div",9)(10,"button",10),e.EFF(11),e.j41(12,"span",11),e.EFF(13),e.k0s()()(),e.j41(14,"div",12)(15,"div",13),e.DNE(16,T,12,0,"ng-template"),e.k0s()()()()()()),2&n&&(e.Y8G("formGroup",o.search),e.R7$(11),e.SpI(" ",o.filtersOpen?"Ocultar":"Ver"," filtros "),e.R7$(2),e.JRh(!o.filtersOpen&&o.search.value.number&&o.search.value.type?" \xa1Antenci\xf3n! se est\xe1n aplicando filtros de b\xfasqueda.":""))},dependencies:[g.MD,s.X1,s.qT,s.xH,s.y7,s.me,s.Q0,s.wz,s.BC,s.cb,s.j4,s.JD,c._f,c.WP,c.r6,c.tW,c.x7,c.UA,c.$R,c.n8,c.md],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .button-clean[_ngcontent-%COMP%]{cursor:pointer;color:#6b8e23;font-weight:700}[_nghost-%COMP%]   .button-clean[_ngcontent-%COMP%]:hover{color:#556b2f}[_nghost-%COMP%]   .search-filters[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{--bs-accordion-bg: transparent}[_nghost-%COMP%]   .search-filters[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:not(.collapsed){color:#000;background-color:#80800033}[_nghost-%COMP%]   .search-filters[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .filter-alert[_ngcontent-%COMP%]{color:orange;margin-left:5px}"]})};C=(0,S.Cg)([(0,P.d)()],C);var N=a(345);let w=(()=>{class t{constructor(n){this.sanitizer=n}transform(n,o,i="highlight"){if("string"!=typeof n||!o)return n;const l=new Map,m=n.toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"");let p=m.length-1;const B=o.toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"");for(;p>0;){p=m.lastIndexOf(B,p-1);const u=n.substring(p,p+o.length);p>-1&&l.set(p,u)}const v=new Map(Array.from(l.entries()).reverse()).entries();let x=v.next().value,h=v.next().value;for(;void 0!==h;){const[u]=x,[d]=h;u+l.get(u)?.length>=d&&l.delete(d),x=h,h=v.next().value}let f=n;return l.forEach((u,d)=>{f=(d>0?f.substring(0,d):"")+`<span class="${i}">${u}</span>`+f.substring(d+o.length)}),this.sanitizer.bypassSecurityTrustHtml(f)}static#e=this.\u0275fac=function(o){return new(o||t)(e.rXU(N.up,16))};static#t=this.\u0275pipe=e.EJ8({name:"highlightQuery",type:t,pure:!0,standalone:!0})}return t})();const H=(t,r)=>r.id;function U(t,r){1&t&&(e.j41(0,"div",4)(1,"div",5)(2,"span",6),e.EFF(3,"Buscando..."),e.k0s()()())}function G(t,r){1&t&&(e.j41(0,"div",7)(1,"h2"),e.EFF(2,"No se encontraron resultados"),e.k0s()())}function $(t,r){if(1&t&&(e.nrm(0,"app-card",9),e.nI1(1,"highlightQuery")),2&t){const n=r.$implicit,o=e.XpG(2);e.Y8G("title","Revista n\xba "+n.Magazine.number+" p\xe1gina "+n.number)("content",e.i5U(1,5,n.content,o.search))("pdfPath",n.Magazine.path)("page",n.number)("frontPage",n.Magazine.image)}}function D(t,r){if(1&t&&(e.j41(0,"div",8),e.Z7z(1,$,2,8,"app-card",9,H),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Dyx(n.magazineService.results())}}let L=(()=>{class t{constructor(){this.magazineService=(0,e.WQX)(M.G),this.#e=(0,e.WQX)(E.Ix),this.closeResult="",this.search=""}#e;setSearch(n){this.search=n.query??"",this.magazineService.searchPdf(n)}goToBackOffice(){this.#e.navigate(["back-office"])}static#t=this.\u0275fac=function(o){return new(o||t)};static#n=this.\u0275cmp=e.VBU({type:t,selectors:[["app-home"]],standalone:!0,features:[e.aNF],decls:7,vars:1,consts:[[1,"m-2","w-100","d-flex","flex-column","align-items-center"],[3,"searchValue"],[1,"lni","lni-cog","back-office-icon",3,"click"],[1,"results","row","h-90"],[1,"col-12","d-flex","flex-colum","align-items-center","justify-content-center","loading"],["role","status",1,"spinner-border","text-warning-emphasis"],[1,"sr-only"],[1,"col-12","d-flex","flex-colum","align-items-center","justify-content-center"],[1,"col-12","row","d-flex","flex-wrap"],[1,"mb-2","col-12","col-sm-6","col-md-4","col-xxl-3",3,"title","content","pdfPath","page","frontPage"]],template:function(o,i){1&o&&(e.j41(0,"section",0)(1,"app-search",1),e.bIt("searchValue",function(m){return i.setSearch(m)}),e.k0s(),e.j41(2,"i",2),e.bIt("click",function(){return i.goToBackOffice()}),e.k0s()(),e.j41(3,"section",3),e.DNE(4,U,4,0,"div",4)(5,G,3,0)(6,D,3,0),e.k0s()),2&o&&(e.R7$(4),e.vxM(4,i.magazineService.loading()?4:0===i.magazineService.results().length&&i.search.length>3?5:6))},dependencies:[g.MD,F,C,w],styles:[".loading[_ngcontent-%COMP%]{min-height:70vh}.back-office-icon[_ngcontent-%COMP%]{position:fixed;top:10px;right:10px;font-size:2rem;cursor:pointer}"]})}return t})()}}]);